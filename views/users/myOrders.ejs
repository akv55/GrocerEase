<% layout("/layouts/boilerplate") -%>
    <div class="order-container">
        <% if(orderItems && orderItems.length> 0) { %>
            <div class="order-filter">
                <div class="filter-title">
                    <h4>Filter Orders</h4>
                </div>
                <div class="order-filter-status">
                    <h5 class="order-status-header">ORDERS STATUS</h5>
                </div>
                <hr>
                <div class="filter-option">
                    <div class="filter-checkbox">
                        <input type="checkbox" id="pending" name="order-status" value="Pending" />
                        <label for="pending">Pending</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="processing" name="order-status" value="Processing" />
                        <label for="processing">Processing</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="shipped" name="order-status" value="Shipped" />
                        <label for="shipped">Shipped</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="delivered" name="order-status" value="Delivered" />
                        <label for="delivered">Delivered</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="cancelled" name="order-status" value="Cancelled" />
                        <label for="cancelled">Cancelled</label>
                    </div>
                </div>
                <hr>
                <div class="order-filter-status">
                    <h5 class="order-status-header">ORDER TIME</h5>
                </div>
                <div class="filter-option">
                    <div class="filter-checkbox">
                        <input type="checkbox" id="last-30-days" name="order-status" value="on-the-way" />
                        <label for="on-the-way">Last 30 Days</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="2024" name="order-status" value="2024" />
                        <label for="2024">2024</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="2023" name="order-status" value="2023" />
                        <label for="2023">2023</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="2022" name="order-status" value="2022" />
                        <label for="2022">2022</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="2021" name="order-status" value="2021" />
                        <label for="2021">2021</label>
                    </div>
                    <div class="filter-checkbox">
                        <input type="checkbox" id="older" name="order-status" value="older" />
                        <label for="older">Older</label>
                    </div>
                </div>
            </div>

            <div class="orders-container">
                <div class="orders-search">
                    <input type="text" class="search-input" placeholder="Search orders...">
                    <button type="submit" class="orders-search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <br>
                <% orderItems.forEach(function(orderItem) { %>
                    <div class="order-card ">
                        
                        <% if (orderItem.items && orderItem.items.length> 0) { %>
                            <% orderItem.items.forEach(function(item) { %>
                                <a href="/my-orders/<%= orderItem.user %>/<%= orderItem.orderId %>">
                                    <div class="orders-items">
                                        <img src="<%= item.product && item.product.image && item.product.image.url ? item.product.image.url : '/assets/file.svg' %>"
                                            class="order-image" alt="<%= item.name %>"
                                            onerror="this.src='/assets/file.svg'" />
                                        <div class="order-details">
                                            <h3>
                                                <%= item.name %>
                                            </h3>
                                            <p>
                                                <%= item.category && item.category.name %>
                                            </p>
                                            <p>Qty: <%= item.quantity %>
                                            </p>

                                        </div>
                                        <div class="order-price">â‚¹<%= (item.price * item.quantity).toFixed(2) %>
                                        </div>
                                        <div
                                            class="<% if (orderItem.status) { %> status-<%= orderItem.status.toLowerCase() %> <% } %>">
                                            <span>
                                                <%= orderItem.status %>
                                            </span>

                                        </div>
                                    </div>
                                </a>
                                <% }); %>
                                    <% } %>




                    </div>
                    <% }); %>

            </div>
            <% } else { %>
                <div class="empty-orders">
                    <div class="empty-state">
                        <i class="fa-solid fa-box-open"></i>
                        <h2>No Orders Found</h2>
                        <p class="empty-message">You haven't placed any orders yet. Start shopping to see your orders
                            here!</p>
                        <a href="/" class="btn btn-primary">Start Shopping</a>
                    </div>
                </div>
                <% } %>
    </div>